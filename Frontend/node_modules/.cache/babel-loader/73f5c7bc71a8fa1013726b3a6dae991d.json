{"ast":null,"code":"import axios from \"@/axios\";\nexport default {\n  state: {\n    user: null,\n    loggedIn: false\n  },\n  getters: {\n    loggedIn: state => state.loggedIn,\n    getToken: state => state.user ? state.user.token : null,\n    getUser: state => state.user\n  },\n  mutations: {\n    SET_USER: (state, user) => {\n      if (user) {\n        state.user = user;\n        state.loggedIn = true;\n      } else {\n        state.user = null;\n        state.loggedIn = false;\n      }\n    }\n  },\n  actions: {\n    login: async ({\n      commit\n    }, user) => {\n      const res = await axios.post(\"users/login\", user);\n\n      if (res.status === 200) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n        commit(\"SET_USER\", res.data);\n        return res.data;\n      }\n    },\n    register: async ({\n      commit\n    }, user) => {\n      const res = await axios.post(\"users\", user);\n\n      if (res.status === 201) {\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n        commit(\"SET_USER\", res.data);\n        return res.data;\n      }\n    },\n    logout: ({\n      commit\n    }) => {\n      try {\n        localStorage.removeItem(\"user\");\n        commit(\"SET_USER\", null);\n      } catch {\n        console.log(\"not logged in\");\n      }\n    },\n    checkUser: ({\n      commit\n    }) => {\n      const user = JSON.parse(localStorage.getItem(\"user\"));\n\n      if (user) {\n        commit(\"SET_USER\", user);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/nystr/OneDrive/Dokument/skola/Frontendutv/Javascript2/Frontend/src/store/modules/user.js"],"names":["axios","state","user","loggedIn","getters","getToken","token","getUser","mutations","SET_USER","actions","login","commit","res","post","status","localStorage","setItem","JSON","stringify","data","register","logout","removeItem","console","log","checkUser","parse","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AAEA,eAAe;AACXC,EAAAA,KAAK,EAAE;AACHC,IAAAA,IAAI,EAAE,IADH;AAEHC,IAAAA,QAAQ,EAAE;AAFP,GADI;AAKXC,EAAAA,OAAO,EAAE;AACLD,IAAAA,QAAQ,EAAGF,KAAD,IAAWA,KAAK,CAACE,QADtB;AAELE,IAAAA,QAAQ,EAAGJ,KAAD,IAAYA,KAAK,CAACC,IAAN,GAAaD,KAAK,CAACC,IAAN,CAAWI,KAAxB,GAAgC,IAFjD;AAGLC,IAAAA,OAAO,EAAGN,KAAD,IAAWA,KAAK,CAACC;AAHrB,GALE;AAUXM,EAAAA,SAAS,EAAE;AACPC,IAAAA,QAAQ,EAAE,CAACR,KAAD,EAAQC,IAAR,KAAiB;AACvB,UAAIA,IAAJ,EAAU;AACND,QAAAA,KAAK,CAACC,IAAN,GAAaA,IAAb;AACAD,QAAAA,KAAK,CAACE,QAAN,GAAiB,IAAjB;AACH,OAHD,MAGO;AACHF,QAAAA,KAAK,CAACC,IAAN,GAAa,IAAb;AACAD,QAAAA,KAAK,CAACE,QAAN,GAAiB,KAAjB;AACH;AACJ;AATM,GAVA;AAqBXO,EAAAA,OAAO,EAAE;AACLC,IAAAA,KAAK,EAAE,OAAM;AAAEC,MAAAA;AAAF,KAAN,EAAkBV,IAAlB,KAA2B;AAC9B,YAAMW,GAAG,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAW,aAAX,EAA0BZ,IAA1B,CAAlB;;AACA,UAAIW,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACpBC,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACO,IAAnB,CAA7B;AACAR,QAAAA,MAAM,CAAC,UAAD,EAAaC,GAAG,CAACO,IAAjB,CAAN;AACA,eAAOP,GAAG,CAACO,IAAX;AACH;AACJ,KARI;AASLC,IAAAA,QAAQ,EAAE,OAAM;AAAET,MAAAA;AAAF,KAAN,EAAkBV,IAAlB,KAA2B;AACjC,YAAMW,GAAG,GAAG,MAAMb,KAAK,CAACc,IAAN,CAAW,OAAX,EAAoBZ,IAApB,CAAlB;;AACA,UAAIW,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACpBC,QAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACO,IAAnB,CAA7B;AACAR,QAAAA,MAAM,CAAC,UAAD,EAAaC,GAAG,CAACO,IAAjB,CAAN;AACA,eAAOP,GAAG,CAACO,IAAX;AACH;AACJ,KAhBI;AAiBLE,IAAAA,MAAM,EAAE,CAAC;AAAEV,MAAAA;AAAF,KAAD,KAAgB;AACpB,UAAI;AACAI,QAAAA,YAAY,CAACO,UAAb,CAAwB,MAAxB;AACAX,QAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;AACH,OAHD,CAGE,MAAM;AACJY,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACH;AACJ,KAxBI;AAyBLC,IAAAA,SAAS,EAAE,CAAC;AAAEd,MAAAA;AAAF,KAAD,KAAgB;AACvB,YAAMV,IAAI,GAAGgB,IAAI,CAACS,KAAL,CAAWX,YAAY,CAACY,OAAb,CAAqB,MAArB,CAAX,CAAb;;AACA,UAAI1B,IAAJ,EAAU;AACNU,QAAAA,MAAM,CAAC,UAAD,EAAaV,IAAb,CAAN;AACH;AACJ;AA9BI;AArBE,CAAf","sourcesContent":["import axios from \"@/axios\";\r\n\r\nexport default {\r\n    state: {\r\n        user: null,\r\n        loggedIn: false,\r\n    },\r\n    getters: {\r\n        loggedIn: (state) => state.loggedIn,\r\n        getToken: (state) => (state.user ? state.user.token : null),\r\n        getUser: (state) => state.user,\r\n    },\r\n    mutations: {\r\n        SET_USER: (state, user) => {\r\n            if (user) {\r\n                state.user = user;\r\n                state.loggedIn = true;\r\n            } else {\r\n                state.user = null;\r\n                state.loggedIn = false;\r\n            }\r\n        },\r\n    },\r\n    actions: {\r\n        login: async({ commit }, user) => {\r\n            const res = await axios.post(\"users/login\", user);\r\n            if (res.status === 200) {\r\n                localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                commit(\"SET_USER\", res.data);\r\n                return res.data;\r\n            }\r\n        },\r\n        register: async({ commit }, user) => {\r\n            const res = await axios.post(\"users\", user);\r\n            if (res.status === 201) {\r\n                localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                commit(\"SET_USER\", res.data);\r\n                return res.data;\r\n            }\r\n        },\r\n        logout: ({ commit }) => {\r\n            try {\r\n                localStorage.removeItem(\"user\");\r\n                commit(\"SET_USER\", null);\r\n            } catch {\r\n                console.log(\"not logged in\");\r\n            }\r\n        },\r\n        checkUser: ({ commit }) => {\r\n            const user = JSON.parse(localStorage.getItem(\"user\"));\r\n            if (user) {\r\n                commit(\"SET_USER\", user);\r\n            }\r\n        },\r\n    },\r\n};"]},"metadata":{},"sourceType":"module"}