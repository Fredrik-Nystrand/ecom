{"ast":null,"code":"import axios from \"@/axios\";\nexport default {\n  state: {\n    cart: []\n  },\n  getters: {\n    cart: state => state.cart,\n    cartItemAmount: state => id => {\n      const itemExists = state.cart.find(item => item.id === id);\n\n      if (itemExists) {\n        return itemExists.amount;\n      }\n    },\n    totalPrice: state => () => state.cart.reduce((a, b) => a + b.price * b.amount, 0)\n  },\n  mutations: {\n    ADD_ITEM: (state, {\n      product,\n      id,\n      amount\n    }) => {\n      const itemExists = state.cart.find(item => item.id === id);\n\n      if (itemExists) {\n        itemExists.amount += amount;\n      } else {\n        const newItem = {\n          id,\n          title: product.name,\n          img: product.imgURL,\n          price: product.price,\n          amount\n        };\n        state.cart.push(newItem);\n        localStorage.setItem(\"cart\", JSON.stringify(state.cart));\n      } //console.log(state.cart);\n\n    },\n    UPDATE_AMOUNT: (state, {\n      id,\n      amount\n    }) => {\n      const itemExists = state.cart.find(item => item.id === id);\n\n      if (itemExists) {\n        if (amount === \"\" || amount <= 1) {\n          itemExists.amount = 1;\n        } else {\n          itemExists.amount = amount;\n        }\n\n        localStorage.setItem(\"cart\", JSON.stringify(state.cart)); //console.log(state.cart);\n      }\n    },\n    REMOVE_ITEM: (state, id) => {\n      const itemExists = state.cart.find(item => item.id === id);\n\n      if (itemExists) {\n        state.cart = state.cart.filter(item => item.id !== id);\n        localStorage.setItem(\"cart\", JSON.stringify(state.cart)); //console.log(state.cart);\n      }\n    },\n    SET_CART: (state, cart) => {\n      if (cart) {\n        state.cart = cart;\n      } else {\n        state.cart = [];\n      }\n    }\n  },\n  actions: {\n    addItem: async ({\n      commit\n    }, {\n      id,\n      amount\n    }) => {\n      const res = await axios.get(\"products/\" + id);\n      commit(\"ADD_ITEM\", {\n        product: res.data,\n        id,\n        amount\n      });\n    },\n    updateAmount: ({\n      commit\n    }, item) => {\n      commit(\"UPDATE_AMOUNT\", item);\n    },\n    removeItem: ({\n      commit\n    }, item) => {\n      commit(\"REMOVE_ITEM\", item);\n    },\n    checkCart: ({\n      commit\n    }) => {\n      const cart = JSON.parse(localStorage.getItem(\"cart\"));\n\n      if (cart) {\n        commit(\"SET_CART\", cart);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["C:/Users/nystr/OneDrive/Dokument/skola/Frontendutv/Javascript2/Frontend/app/src/store/modules/cart.js"],"names":["axios","state","cart","getters","cartItemAmount","id","itemExists","find","item","amount","totalPrice","reduce","a","b","price","mutations","ADD_ITEM","product","newItem","title","name","img","imgURL","push","localStorage","setItem","JSON","stringify","UPDATE_AMOUNT","REMOVE_ITEM","filter","SET_CART","actions","addItem","commit","res","get","data","updateAmount","removeItem","checkCart","parse","getItem"],"mappings":"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","sourcesContent":["import axios from \"@/axios\";\r\n\r\nexport default {\r\n    state: {\r\n        cart: [],\r\n    },\r\n    getters: {\r\n        cart: (state) => state.cart,\r\n        cartItemAmount: (state) => (id) => {\r\n            const itemExists = state.cart.find((item) => item.id === id);\r\n\r\n            if (itemExists) {\r\n                return itemExists.amount;\r\n            }\r\n        },\r\n        totalPrice: (state) => () =>\r\n            state.cart.reduce((a, b) => a + b.price * b.amount, 0),\r\n    },\r\n    mutations: {\r\n        ADD_ITEM: (state, { product, id, amount }) => {\r\n            const itemExists = state.cart.find((item) => item.id === id);\r\n            if (itemExists) {\r\n                itemExists.amount += amount;\r\n            } else {\r\n                const newItem = {\r\n                    id,\r\n                    title: product.name,\r\n                    img: product.imgURL,\r\n                    price: product.price,\r\n                    amount,\r\n                };\r\n\r\n                state.cart.push(newItem);\r\n                localStorage.setItem(\"cart\", JSON.stringify(state.cart));\r\n            }\r\n\r\n            //console.log(state.cart);\r\n        },\r\n\r\n        UPDATE_AMOUNT: (state, { id, amount }) => {\r\n            const itemExists = state.cart.find((item) => item.id === id);\r\n            if (itemExists) {\r\n                if (amount === \"\" || amount <= 1) {\r\n                    itemExists.amount = 1;\r\n                } else {\r\n                    itemExists.amount = amount;\r\n                }\r\n\r\n                localStorage.setItem(\"cart\", JSON.stringify(state.cart));\r\n                //console.log(state.cart);\r\n            }\r\n        },\r\n\r\n        REMOVE_ITEM: (state, id) => {\r\n            const itemExists = state.cart.find((item) => item.id === id);\r\n            if (itemExists) {\r\n                state.cart = state.cart.filter((item) => item.id !== id);\r\n\r\n                localStorage.setItem(\"cart\", JSON.stringify(state.cart));\r\n                //console.log(state.cart);\r\n            }\r\n        },\r\n        SET_CART: (state, cart) => {\r\n            if (cart) {\r\n                state.cart = cart;\r\n            } else {\r\n                state.cart = [];\r\n            }\r\n        },\r\n    },\r\n    actions: {\r\n        addItem: async({ commit }, { id, amount }) => {\r\n            const res = await axios.get(\"products/\" + id);\r\n\r\n            commit(\"ADD_ITEM\", { product: res.data, id, amount });\r\n        },\r\n\r\n        updateAmount: ({ commit }, item) => {\r\n            commit(\"UPDATE_AMOUNT\", item);\r\n        },\r\n\r\n        removeItem: ({ commit }, item) => {\r\n            commit(\"REMOVE_ITEM\", item);\r\n        },\r\n\r\n        checkCart: ({ commit }) => {\r\n            const cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n\r\n            if (cart) {\r\n                commit(\"SET_CART\", cart);\r\n            }\r\n        },\r\n    },\r\n};"]},"metadata":{},"sourceType":"module"}